\documentclass{report}
\usepackage{graphicx}
\usepackage{xepersian}
\usepackage{geometry}
\settextfont[Scale=1.2]{XB Zar}

% section numbering
\setcounter{secnumdepth}{3}
\renewcommand{\thesection}{\arabic{section}}
\renewcommand{\thesubsection}{\thesection.\arabic{subsection}}
\renewcommand{\thesubsubsection}{\thesection.\arabic{subsection}.\arabic{subsubsection}}

\title{ 
\begin{normalsize} به نام خدا \end{normalsize}
\\[7cm]
طراحی نقشه ساختمان با استفاده از پردازش تکاملی
\\[3cm]
}
\author{علیرضا نوریان
\\
\\ \small دانشگاه علم و صنعت ایران
\\ \small noorian@comp.iust.ac.ir
}

\begin{document}
\maketitle

\tableofcontents

\begin{abstract}

\end{abstract}

\section{مقدمه}
زندگی مدرن برای بشر مزایا و البته معایب بسیار زیادی به همراه آورده است. بسیاری از مشکلات حاصل از زندگی نو ریشه‌های عمیق فرهنگی دارند و شاید پاسخهای متناسب با ارزشهای دنیای جدید، برای آنها مناسب نباشند ولی در همه موارد این حرف صحیح نیست. پروژه‌ی پیش‌رو نمونه‌ای از حل مشکلات دنیای نو با استفاده از راهکارهای آن است. به طور مختصر می‌توان گفت هدف این پروژه فراهم کردن خانه‌های عملکردگرا برای سازنده‌ی مقتصد است که البته خریدار محکوم به زندگی در دنیای جدید از آن نفع خواهد برد.
به وجود آمدن مفهوم «بازار مسکن» را می‌توان از پیامدهای این زندگی جدید دانست. بازار مسکن به عنوان یکی از بازارهای پر سود موجب رشد و برخاستن جماعت «بساز و بفروش»ها شده است و این یعنی پایین آمدن کیفیت محل سکونت، کم شدن مساحت و ... که بدون تردید تاثیر بسیار بدی روی فرهنگ جامعه گذاشته است. این پروژه با هدف فراهم کردن نقشه‌ی بهینه ساختمان از جهات عملکردی انجام شده است و البته تا رسیدن به این مقصود فاصله‌ی بسیار زیادی دارد. در واقع ورودی نرم‌افزار تهیه شده در این پروژه قیدهای ساختمان از نظر طراح آن و خروجی نقشه‌ی ساختمان است.
«تولید نقشه‌ی بهینه‌ی ساختمان» جزء مسائل بهینه‌سازی محسوب می‌شود و راه حل آن کاملا وابسته به نحوه مدل‌سازی ساختمان است. در این پروژه ارائه‌ی ساختمان به گونه‌ای انجام گرفته که مساله با روشهای «پردازش تکاملی» قابل حل باشد. در ادامه پس از بررسی کوتاهی در مورد پردازش تکاملی به تعریف مساله و پاسخ داده شده به آن می‌پردازیم.

\section{محاسبات تکاملی}
حل مساله توسط رایانه به روشهای مختلفی ممکن است. جستجو به روش آزمون و خطا یکی از روشهای پرکاربرد در این زمینه است. ایده‌ی اصلی در این روش، شروع با تعدادی پاسخ و ارتقای تدریجی آنها است. اجرای چنین رویه‌ای، با تعریف فضای جستجو و نحوه‌ی ارزش‌گزاری پاسخها شروع می‌شود و فرایند ارتقا به شکلهای بسیار متنوع انجام می‌شود. محاسبات تکاملی با الگوگیری از نظریه‌ی تکامل در طبیعت، فرایند ارتقا را به انتخاب طبیعی و یا همان تنازع برای بقا، واگذار می‌کند.
فرایند تکامل با یک نسل اولیه آغاز می‌شود که به طور اتفاقی ایجاد شده است. اعمال عملگرهای مربوط به تولید فرزند از روی نسل موجود، منجر به تولید مجموعه‌ای از فرزندان می‌شود که اگر شایسته باشند، می‌توانند جای افراد ناشایست را در نسل کنونی بگیرند و به این ترتیب نسل جدید، مطابق قضاوت تابع ارزش‌گزاری، نسبت به نسل پیشین تکامل یافته است.
الگوریتم‌های بسیار زیادی برای انجام این فرایند ایجاد شده‌اند که تمایز میان آنها ناشی از نحوه‌ی مواجهه آنها با مفاهیم زیر است. واژه‌هایی را که در ادامه مورد بررسی قرار می‌گیرند، می‌توان به نوعی کلیدواژه‌های توصیف یک فرایند تکاملی خواند:
\paragraph{ارائه}
گام اول در تعریف یک فرایند تکامل، انتقال مفاهیم دنیای واقع به فضای حل مساله است. برای این منظور سعی می‌کنیم ویژگی‌های موجود در پاسخی را که با این فرایند به دنبال آن می‌گردیم، در قالب یک ژنوم ارائه کنیم. این ژنوم دنباله‌ای از مقادیر است که می‌تواند به صورت دودویی یا حقیقی باشند. باید توجه کنیم که این ژنوم همه‌ی اطلاعات مورد ارزیابی را برای تعیین یک پاسخ خوب به همراه داشته باشد و ارتقای این ژنوم به معنی ارتقای ارزشمندی در پاسخ مورد جستجو باشد.
\paragraph{تابع ارزیابی}
تابع ارزیابی نمایانگر ارزش یک ژنوم است و این ارزش تابعی است از ارزشی که به پاسخ متناظر با این ژنوم اختصاص می‌دهیم. ارتقا و تکامل در این فرایند، دقیقا به معنی بالا (یا پایین) رفتن مقدار این تابع است. از این تابع به عنوان تابع هدف هم یاد می‌کنند که به طور مشخص، مفهوم تلاش برای رسیدن به مقدار بهینه‌ی آن را نشان می‌دهد.

\paragraph{جمعیت}
از این عبارت برای توصیف تعدادی از افراد\LTRfootnote{Individuals} و یا همان مجموعه‌ای از ژنوم‌ها استفاده می‌کنیم. تعداد افراد موجود در یک جمعیت ثابت است و در ابتدای فرایند تعیین می‌شود. جمعیت در فرایند تکامل همان واحدی است که ارتقا می‌یابد و می‌توان گفت هدف فرایند تکامل تولید یک جمعیت خوب است و نه یک فرد خوب. در فرایند تکامل بعضی از رویه‌ها و حتی معیارها روی جمعیت تعریف می‌شوند. برای نمونه انتظار ما از فرایند تکامل، تولید یک جمعیت از پاسخهای گوناگون است و برای سنجش این گوناگونی، روشهایی مثل تفاوت میان ارزشمندی‌ها و یا تفاوت میان ژنوم‌ها مورد استفاده قرار می‌گیرند.

\paragraph{انتخاب والد}
برای رسیدن به جمعیت‌های بهتر باید فرزندان بهتری تولید کنیم و این هدف با انتخاب والدهای مناسب محقق می‌شود. انتخاب والد معمولا به شکل احتمالی انجام می‌شود و افراد بهتر، شانس بیشتری برای انتخاب شدن دارند. به این ترتیب شانس باقی ماندن ویژگی‌های تولید شده در فرزندان بیشتر می‌شود و جستجو با وسعت بیشتری انجام می‌شود.

\paragraph{عملگرهای تغییر}
این عملگرها وظیفه‌ی تولید فرزند را بر عهده دارند و می‌توان آنها را گام‌های جستجو نامید. عملگرهای تغییر با توجه به تعداد ورودی‌هایشان به دو دسته تقسیم می‌شوند:

\subparagraph{جهش}
عملگر جهش یک ورودی و یک خروجی دارد. در واقع این عملگر تغییر مختصری را به صورت احتمالی روی ژنوم اعمال می‌کند. در بعضی از انواع الگوریتم‌ها این عملگر تمام نقش جستجو را بر عهده دارد و در مقابل بعضی از الگوریتم‌ها هیچ استفاده‌ای از آن نمی‌کنند. عملگر جهش در واقع برای ایجاد یک تغییر قابل توجه در ژنوم ایجاد شده و از نظر تئوری دستیابی به هر پاسخی در فضای جستجو را ممکن می‌کند. این عملگر وابستگی زیادی به نوع داده دارد. برای نمونه جهش در رشته‌ای از بیت‌ها به معنی تغییر یک ژن از 0 به 1 یا از 1 به 0 است، در حالی که در مساله‌ای مثل هشت وزیر باید جای وزیرها را با هم عوض شود.

\subparagraph{ترکیب}
عملگر ترکیب برای تولید فرزند یا فرزندانی با ویژگی‌های به ارث رسیده از دو والد، طراحی شده است. این عملگر نیز برای انتخاب بخشهای مختلف فرزند از دو والد، به شکل احتمالی عمل می‌کند. استفاده از عملگر ترکیب روی چند والد نیز ممکن است و در این حالت هر ویژگی فرزند ممکن است از والدی جدید انتخاب شود. باید توجه داشت که دلیل استفاده از این عملگر، قابلیت آن برای انتقال ویژگی‌های خوب از والدین منتخب است و این انتقال وابستگی زیادی به نحوه تعریف ژنوم دارد. به عبارتی هرچه استقلال ژن‌ها برای توصیف ویژگی‌ها از همدیگر بیشتر باشد، امکان انتقال ویژگی‌های مثبت بیشتر می‌شود. برای نمونه اگر رنگ چشم انسان تنها در یک عدد از ژنوم خلاصه شود، رنگ چشم مطلوب به آسانی به ارث می‌رسد در حالی که اگر اجزای رنگ در فضای رنگی RGB هر کدام یک عدد باشند، امکان به ارث رسیدن رنگ چشم مطلوب بسیار کاهش می‌یابد.

\paragraph{جایگزینی}
پس از تولید فرزندان از والدهای انتخاب‌شده، باید جمعیت جدید که همان نسل تکامل یافته است، ایجاد شود. برای انجام این کار، تعدادی از فرزندان ایجاد شده باید جایگزین افراد نسل قبل شوند. این جایگزینی با توجه به میزان ارزشمندی فرزندان و والدها انجام می‌شود. البته عواملی مانند سن والدها هم معمولا مورد توجه قرار می‌گیرند. این مرحله می‌تواند به صورت احتمالی و یا قطعی انجام شود و از انواع رایج آن مرتب‌سازی همه‌ی پاسخها و انتخاب نسل بعد از میان بهترین‌ها است.

\paragraph{آغاز}
جمعیت اولیه که از هیچ نسلی ایجاد نشده‌اند باید به شکلی تشکیل شود. بیشتر الگوریتم‌ها تولید این جمعیت را با در نظر گرفتن قیدهای مساله، به صورت کاملا احتمالی انجام می‌دهند. البته جمعیت آغازین می‌تواند به شکل ابتکاری و با هدف ایجاد گرایش در پاسخ‌ها تولید شود ولی بحثهای زیادی در نقد استفاده از این روشها وجود دارد.

\paragraph{شرط خاتمه}
فرایند تکامل باید به شکلی خاتمه یابد. رسیدن به مرز مشخصی از ارزشمندی یا حداقل نزدیک شدن به آن، می‌تواند معیار خوبی برای توقف باشد. اما با توجه به احتمالی بودن دستیابی به پاسخ، تضمینی برای رسیدن به مرز مورد نظر وجود ندارد و ممکن است در این حالت الگوریتم هیچ وقت متوقف نشود. به همین دلیل معیارهایی مثل حداکثر زمان استفاده از پردازنده، حداکثر تعداد اجرای تابع ارزیابی، ثابت ماندن میزان ارزشمندی طی نسلها و یا کاهش میزان گوناگونی در جمعیت، برای مطمئن شدن از توقف فرایند تعریف می‌شوند. 

پس از آشنایی با واژه‌ها و مفاهیم محاسبات تکاملی، در ادامه به توصیف الگوریتم‌های مورد استفاده در این پروژه می‌پردازیم.
\subsection{الگوریتم ژنتیک}
\subsection{استراتژی تکاملی}
\subsection{روشهای چند هدفه}
\subsection{روشهای ترکیبی}

\section{تعریف مساله}
کاربر نرم‌افزار علاقه دارد با فشار دادن یک دکمه نقشه‌ی ساختمان را با جزئیات کامل دریافت کند. افق این پروژه نیز به همین شکل ترسیم شده است؛ اما آغاز راه باید کمی ساده‌تر تصور شود. در این مرحله از سیر پروژه، زمین ساختمان به صورت یک مستطیل در نظر گرفته شده و کاربر باید ابعاد آن را مشخص کند. همچنین نرم‌افزار هیچ شناختی از اتاقها ندارد و کاربر باید مساحت و یا ابعاد هر کدام از آنها را تعیین کند. قرار دادن اتاقهای مستطیل‌شکل در فضا موجب به وجود آمدن فضاهای خالی می‌شود؛ فضای دسترسی نامی است که برای این فضاهای باقیمانده در نظر گرفته شده و قابل استفاده کردن آنها از اهداف چالش برانگیز پروژه است. باید به محدودیتهای کنونی پروژه، فرض مسکن بودن ساختمان را نیز اضافه کرد. در واقع درک نرم‌افزار از فضای دسترسی، یک هال بزرگ متصل به حداقل راهروهای ممکن برای ایجاد دسترسی به اتاقها است.
خانه‌ی مطلوبی که قرار است به عنوان خروجی ارائه شود باید قابل سکونت باشد؛ یعنی علاوه بر انطباق با خواسته‌های کاربر از نظر ابعاد، دسترسی به همه‌ی اتاقهای آن ممکن باشد. البته کاربر وظیفه‌ی انتخاب نحوه دسترسی را بر عهده دارد و می‌تواند تعیین کند که مثلا مستطیل مربوط به آسانسور تنها از مستطیل راه‌پله قابل دستیابی است. 
آخرین وظیفه‌ی کاربر تعیین نوع نورگیری ساختمان در ضلعهای مختلف آن است. شناخت نحوه گرفتن نور توسط ساختمان و ورودی گرفتن اولویت نوری میان اتاقها از کاربر به نرم‌افزار امکان طراحی خانه‌ای با الگوی نورگیری مناسب را می‌دهد. امید است که در نگارشهای بعدی نرم‌افزار قابلیت تصمیم‌گیری در مورد نیاز خانه به نورگیر و مشخصات آن را کسب کند. ارزیابی یک ساختمان و به طور خاص یک خانه جنبه‌های بی‌شماری دارد که حضور در مراحل آغازین، بهانه‌ای قابل قبول برای صرف نظر کردن از آنهاست.

\section{نحوه بیان مساله}
حل این مساله با فرایند تکامل نیازمند توصیف پاسخ آن در قالب تعداد محدودی عدد حقیقی است که به مجموعه‌ی آنها ژنوم می‌گوییم. معنی این اعداد هرچه از هم مستقل‌تر باشد، جستجو در فضای حل مساله آسان‌تر انجام می‌گیرد؛ از این‌رو هر اتاق ساختمان را با چهار مؤلفه فاصله افقی و عمودی از مبدا و طول و عرض آن نمایش می‌دهیم. با این نحوه‌ی ارائه اگر همه‌ی اعداد ژنوم مثبت باشند، می‌توان آن را ژنومی معتبر دانست. اگرچه این سطح از اعتبار تضمین نمی‌کند که اتاقها با هم تداخل نداشته باشند، اما می‌توانیم مطمئن باشیم که اتاقی با طول و عرض منفی نداریم.

\section{عملگرها}
عملگرهای فرایند تکامل باید با ژنومی که برای توصیف پاسخها استفاده می‌شود، سازگار باشند. بعضی از انواع عملگرها به طور عام طراحی شده‌اند و این پروژه نیز از آنها بی‌بهره نبوده است. اما علاوه بر عملگرهای عام، عملگرهایی نیز به طور خاص برای ژنوم توصیف کننده ساختمان تعریف شده‌اند. نکته‌ی مشترک در این عملگرها، نگاه به اتاقها با عبور از اعداد توصیف کننده‌ی آنهاست. در واقع عملگرهای عام به هر عدد موجود در ژنوم به طور مستقل نگاه می‌کنند در حالی که ما به دنبال عملگرهایی هستیم که در آنها اتاقها موضوعیت داشته باشند.
برای نمونه در نوع خاصی از عملگر ادغام هر ویژگی فرزند به طور احتمالی از یک والد انتخاب می‌شود. این عملگر با انگیزه‌ی ایجاد فرزندی با ویژگی‌های والدها طراحی شده و انتظار می‌رود فرزند مربوط به والدهای بهتر، بخشی از شایستگی‌های هر والد را به همراه داشته باشد. حتی در یکی از شکلهای اجرا، ممکن است تعداد زیادی والد همزمان برای تولید تعداد زیادی فرزند مورد استفاده قرار گیرند. تاثیر این عملگر روی ژنوم توصیف کننده ساختمان به نظر کمی متفاوت با هدف طراحی آن می‌رسد؛ چراکه شایسته بودن والد بیش از آنکه به هر عدد وابسته باشد، به هر اتاق (چهار عدد متوالی) وابسته است و احتمال بسیار زیادی وجود دارد که فرزند از هر دو والد شایستگی کمتری داشته باشد. این پدیده با بی‌اثر کردن عملگر ادغام، علاوه بر کند کردن فرایند تکامل، موجب کاهش گوناگونی در پاسخها و به عبارتی بروز همگرایی در آنها می‌شود. در توضیح این ادعا باید گفت که با کم‌رنگ شدن نقش عملگر ادغام، همه‌ی وظیفه‌ی ایجاد تنوع روی دوش عملگر جهش می‌افتد و پاسخهای نسبتا بد در مقابل پاسخهای تولید شده از جهش‌های مختلف یک جواب بهتر، حذف می‌شوند. در ادامه به عملگرهایی که برای این مساله خاص طراحی شده‌اند، توجه می‌کنیم و نتایج مربوط به این پدیده را در بخش نتایج مربوط به روشهای مختلف، مشاهده می‌کنیم.

\subsection{ادغام اتاقها}
این عملگر از دو والد که از مرحله انتخاب عبور کرده‌اند، دو فرزند ایجاد می‌کند. هر اتاق در هرکدام از فرزندها با احتمال مشخصی متعلق به یکی از دو والد است. برای نمونه ممکن است فرزند تولید شده آشپزخانه را از یک والد و اتاق خواب را از والد دیگر به ارث ببرد.

\subsection{جهش تعویض مکان دو اتاق}
این عملگر روی فرزندان حاصل از عملیات ادغام، اعمال می‌شود و همانطور که اشاره شد به معنی مجموعه‌ی اعدادی که یک اتاق را نمایش می‌دهند توجه دارد. این عملگر مرکز قرار گیری دو اتاق را که به طور اتفاقی انتخاب شده‌اند، با هم عوض می‌کند. در مراحل آغازین فرایند تکامل (زمانی که پاسخها نقصهای متعددی دارند) و همچنین هنگامی که شرطهای مربوط به ابعاد برای دو اتاق انتخاب شده مشابه هم است، تاثیر بهتری را می‌توان از چنین عملگری مشاهده کرد. 

\section{تابع ارزیابی}
از ژنوم صحبت کردیم و اینکه نقشه‌ی ساختمان را با تعدادی عدد حقیقی نمایش می‌دهیم. فرایند تکامل برای رسیدن به هدف نیاز به یک راهنما دارد و این راهنما باید نتایج فرایند را به سمت ساختمان هدایت کند. نقشه‌ی ساختمان ویژگی‌های زیادی باید باشد، تابع ارزیابی باید هر کدام از این ویژگی‌ها را با استفاده از معیاری کمّی بسنجد تا تحقق آنها در پاسخ ممکن باشد.
در این پروژه محدودیت زمانی مانع از تعریف معیارهای بسیار پیچیده برای ارزیابی ویژگی‌ها ساختمان شد. از این رو نتایج فرایند تکامل را نمی‌توان خانه‌های مناسبی برای زندگی دانست؛ اگرچه شباهت زیادی به آنها دارند و یا حتی در مواردی قابل سکونت هم هستند. برای نمونه ساختمانهای خروجی قابل اجرا هستند یعنی اتاقها با هم تداخل ندارند و حتی دیوار بین آنها هم مورد توجه قرار گرفته؛ اما روشن است که انتظار ما از خانه خیلی بیشتر از قابل اجرا بودن است.
بعضی از معیارها با استفاده از تحلیل هندسی هر اتاق و یا هر دو اتاق انجام می‌شوند. چنین معیارهایی معمولا ویژگی‌های ساده‌ای را مورد بررسی قرار می‌دهند و طبیعتا ابهام کمتری دارند. برای نمونه ما انتظار داریم ابعاد اتاق خواب در خانه مقادیر مشخصی باشد، معیار متناظر با این ويژگی مورد انتظار، به صورت سنجش مساحت هر اتاق به طور جداگانه تعریف می‌شود. اما بعضی از ویژگی‌ها نیاز به بحث و بررسی بیشتری دارند.
غیر از این معیارهای ساده، معیارهای دیگری هم وجود دارند که به فضای خالی میان اتاقها را ارزیابی می‌کنند. نحوه توصیف این فضا و محاسبه‌ی آن یکی از چالشهای این پروژه است که در توضیح بیشتری در مورد آن می‌دهیم.

\subsection{فضای دسترسی}
ارضای معیارهای مربوط به فضای خالی میان اتاقها، کاملا وابسته به تعریفی است که از این فضا ارئه می‌کنیم. در این پروژه تعریف فضا به صورت قرار دادن مستطیلهای فرضی در پاسخ صورت گرفته است. در واقع الگوریتمی ابتکاری برای قرار دادن بزرگترین مستطیلهای ممکن برای پوشاندن فضای خالی تعریف شده است. مستطیلهای بدست آمده از این الگوریتم ماده خام برای انجام ارزیابی‌های فضایی هستند. بزرگترین و متناسب‌ترین مستطیل از میان این مستطیلها به عنوان هال انتخاب می‌شود و بقیه نقش راهرو و پیش‌فضا را بازی می‌کنند. در تعریف پیش‌فضا باید گفت که ورودی بعضی از اتاقها مثل حمام بهتر است که در تماس مستقیم با فضای دسترسی اصلی نباشد. پوشش فضایی به گونه‌ای انجام می‌شود که فضاهای خرد انتخاب نشده و فقط فضاهای قابل استفاده انتخاب شوند. 
\begin{figure}[h] \centerline{\includegraphics{AccessSpace}} \caption{\label{fAccessSpace}
 نمایش فضای دسترسی بین اتاقها
 } \end{figure}

\subsubsection{روش محاسبه فضای دسترسی}
فضای خالی میان اتاقها باید با بزرگترین مستطیلهای ممکن پوشانده شود. این مستطیلها می‌توانند روی هم قرار بگیرند ولی طول یا عرض آنها نباید کوچکتر از مقدار مشخصی باشد. برای پیدا کردن مستطیلهای پوشاننده، ابتدا شبکه‌ای از نقاط را روی صفحه قرار می‌دهیم و سعی می‌کنیم بزرگترین مستطیلی را که از هر نقطه عبور می‌کند، محاسبه کنیم. برای پیدا کردن بزرگترین مستطیل عبور کننده از یک نقطه، به فاصله‌ي آن نقطه تا مستطیلهای مجاور آن نگاه می‌کنیم و به این ترتیب سعی می‌کنیم طول و عرض مستطیل را پیدا کنیم.
در نهایت بزرگترین مستطیل از میان مستطیلهای مشخص شده را به عنوان فضای اصلی دسترسی تعیین می‌کنیم. این مستطیل در خانه‌ی مسکونی همان اتاق هال است و هر مستطیلی که در تماس با آن نباشد، مکانی غیر قابل دسترسی فرض شده و حذف می‌شود.
می‌توان گفت این روش به دنبال بررسی همه‌ی مستطیلهای ممکن برای پوشاندن فضای خالی است و قرار دادن شبکه‌ای از نقاط روی صفحه موجب می‌شود که مساله از فضای اعداد پیوسته به اعداد گسسته انتقال یابد. البته برای حل این مساله احتمالا راههای بسیار بهتری از آنچه که توضیح داده شد، وجود دارد. امید است که در آینده این روش مورد بازبینی و اصلاح قرار گیرد.

\subsection{معیارها}
در این بخش به دنبال مشخص کردن معیارهایی کمّی برای رسیدن به ویژگی‌های مطلوب ساختمان هستیم. بعضی از اهداف ما به صورت جریمه مطرح می‌شوند و مشخص می‌کنند که ساختمان باید چطور نباشد. در مقابل بعضی دیگر برای ساختمان امتیاز محسوب می‌شوند و البته بهتر بودن مقدار آنها به معنی بالاتر بودن کیفیت خانه است. به عبارت دیگر اگر ساختمان از نظر معیارهایی که به صورت امتیاز مطرح می‌شوند، ارزش کمی داشته باشد، باز هم قابل اجرا است ولی محل مناسبی برای استفاده نیست.
نکته‌ای که در تعریف معیارها مورد توجه قرار گرفته و روی آن بسیار تاکید می‌شود، تدریجی بودن اکتساب مزیت در آنها است. در واقع سعی بر آن است که مسیر مشخصی جلوی فرایند تکامل قرار گیرد تا پیمودن آن ممکن باشد. این ویژگی ضامن رسیدن فرایند به پاسخ است و نبودن آن موجب می‌شود که رسیدن به پاسخ کاملا به اقبال وابسته باشد. برای نمونه فرض کنید که به دنبال قرارگیری اتاق خاصی در مرکز خانه باشیم. برای ارزیابی پاسخهایی که این ویژگی در آنها برآورده نشده است، فاصله‌ی اتاق مورد نظر را تا مرکز خانه به عنوان جریمه در نظر می‌گیریم و فرایند تکامل کم‌کم اتاق را به محل مورد نظر ما می‌رساند. اگر این نگاه بر معیار ما حاکم نبود، فقط پاسخی که در آن اتاق در مرکز خانه قرار گرفته ارزشمند تلقی می‌شد و این یعنی فرایند تکامل ممکن است این پاسخ را پیدا نکند.

\subsubsection{تداخل}
نقشه‌ی خانه را می‌توان طوری توصیف کرد که تداخل اتاقها و یا خارج شدن اتاقها از محدوده ساختمان بی‌معنی باشد. اما در توصیفی که تاکنون از نقشه داشته‌ایم، احتمال وقوع این اتفاق کم نیست. از این رو جریمه‌ی تداخل را برای جلوگیری از آن تعریف می‌کنیم.
برای سنجش این معیار، میزان تداخل میان هر دو اتاق و هر اتاق با فضا خارج از محدوده نقشه را اندازه می‌گیریم. توجه کنید که منظور از میزان تداخل، مساحت مشترک میان دو اتاق نیست؛ چراکه استفاده از مساحت موجب بی‌ارزش شدن تداخل میان اتاقهای کوچک می‌شود. میزان تداخل برابر کمترین مقدار تغییر مکان لازم برای برطرف شدن تداخل میان دو اتاق است. به همین منظور فاصله‌ی عمودی و افقی خروج از حالت تداخل محاسبه شده و کمینه‌ی آنها به عنوان جریمه اعلام می‌شود.
\begin{figure}[h] \centerline{\includegraphics{Intersection}} \caption{\label{fIntersection}
 میزان تداخل میان دو اتاق
 } \end{figure}

\subsubsection{ابعاد}
برای یافتن ابعاد مناسب یک اتاق باید به سوالهای زیادی در مورد آن پاسخ دهیم. دلباز و بزرگ بودن اتاق مورد نظر ما است و یا برعکس هر چه کوچکتر باشد، فضای کمتری از خانه را هدر داده‌ایم. اگر در خانه از فرش استفاده می‌کنیم، آیا فضای اتاق با اندازه‌های استاندارد فرش سازگار است. فضای مورد نظر ما برای عبور طراحی شده و یا صحبت از مکانی برای زندگی و گذراندن وقت است. قرار است در این اتاق از تخت استفاده کنیم و یا ابعاد مبلمان را باید در نظر داشته باشیم. سوالهای بسیار زیادی در این بخش قابل طرح هستند و پاسخ آنها نیز قابل سنجش و اعمال است.
این کاربری‌ها برای تحقق نیاز دارند کمّی شوند. برای این کار دو روش «تعیین طول و عرض» و «تعیین مساحت» پیاده‌سازی شده‌اند که در ادامه به توضیح آنها می‌پردازیم. باید توجه کنیم که در هر دو روش، جریمه‌ها طوری تعیین شده که فضای مورد آزمون از فضای مورد انتظار کوچکتر نباشد. در واقع وظیفه‌ی بزرگ نشدن یک فضا بر عهده‌ی حداقلهای مورد نظر ما از فضاها دیگر قرار داده شده است.

\paragraph{طول و عرض}
وجود ابعاد استاندارد برای بعضی از فضاها و یا محدودیتهایی که اشیاء درون آنها مثل مبلمان و یا فرش برای ما ایجاد می‌کند می‌تواند ابعاد دقیق فضا را مشخص کند. در این حالت کاربر طول و عرض فضا را برای تابع ارزیابی مشخص می‌کند و تابع ارزیابی سعی می‌کند در حالت عمودی یا افقی فضایی به فضایی با ابعاد مشخص‌شده برسد. جریمه‌ی تبعیت نکردن پاسخ از این شروط به صورت نمایی اعمال می‌شود و به همین دلیل، در بیشتر پاسخها شرط ابعاد رعایت می‌شود. در تعریف مساله‌ی نمونه برای این گزارش ابعاد راه‌پله و آسانسور به این طریق تعیین شده است.

\paragraph{مساحت}
وقتی ابعاد دقیق یک فضا برای ما مشخص نیست، باید مساحت آن را مشخص کنیم. شکل عملی‌تر برای قرار دادن این شرط مشخص کردن سهم هر فضا از کل فضای مربوط به ساختمان است. به بیان دیگر در این روش به دنبال قرار دادن اولویت میان مساحت اتاقها هستیم.
منظور از مساحت در این بخش، مساحت قابل استفاده است. ما انتظار داریم که نسبت میان طول و عرض یک اتاق، در بازه‌ی مشخصی قرار گیرد. برای نمونه اتاقی که طول آن سه برابر عرض آن باشد قابل استفاده نیست و یا حداقل از همه مساحت آن استفاده نمی‌شود. در فرایند تکامل تولید شدن چنین پاسخهایی بسیار محتمل است، پس باید معیار را طوری تعریف کنیم که گرایش این پاسخها به سمت پاسخهای متناسب باشد. برای دستیابی به این هدف بخشی از فضا را که به نظر قابل استفاده می‌رسد، انتخاب می‌کنیم و بخش باقیمانده را نادیده می‌گیریم. به این ترتیب میزان جریمه از تفاضل مساحت مورد انتظار و مساحت قابل استفاده، محاسبه می‌شود.

\begin{figure}[h] \centerline{\includegraphics{AreaRatio}} \caption{\label{fAreaRatio}
بخشی از فضا که در ارزیابی مساحت مورد توجه قرار می‌گیرد
 } \end{figure}

\paragraph{ابعاد فضای دسترسی}
در تعریف این فضا گفته شد که فضای دسترسی شامل یک فضای اصلی (در خانه مسکونی هال) و تعدادی راهرو است. راهرو فضایی است که برای ایجاد دسترسی آن را قرار می‌دهیم و می‌توان گفت مجبور به استفاده از آن هستیم. به این ترتیب به دنبال کاهش تعداد مستطیلهای پوشاننده‌ی فضا هستیم و بهترین حالت، انجام این کار با یک مستطیل است. معیار دیگر برای سنجش کیفیت فضای دسترسی، بزرگ بودن مستطیلها است.
در واقع ما به دنبال پر کردن فضای خالی با کمترین تعداد مستطیل ممکن هستیم و می‌خواهیم این فضا بزرگ و قابل استفاده باشد. البته منظور از بزرگ شدن این فضا، کم کردن مساحت اتاقها نیست بلکه با توجه به جدا بودن معیار ابعاد اتاقها، نتیجه کم شدن فضاهای بی مصرف و افزوده شدن آنها به فضای دسترسی است.

\begin{figure}[h] \centerline{\includegraphics{LessAccessSpaces}} \caption{\label{fLessAccessSpaces}
کاهش تعداد مستطیلها حاصل مرتب چیدن اتاقها
 } \end{figure}

\subsubsection{دسترسی}
همه‌ی فضاهای مورد استفاده در ساختمان باید راهی برای دسترسی داشته باشند. نحوه دسترسی به اتاقهای ساختمان نمونه در این گزارش در شکل زیر نمایش داده شده است. همانطور که در این شکل مشاهده می‌کنید بعضی از اتاقها به طور مستقیم از فضای اصلی مورد دستیابی قرار می‌گیرند و بعضی هم برای دستیابی نیاز به یک (یا چند) واسطه دارند.

\begin{figure}[h] \centerline{\includegraphics{AccessGraph}} \caption{\label{fAccessGraph}
نمودار دسترسی میان اتاقها
 } \end{figure}

محاسبه‌ی میزان جریمه برای دسترسی میان دو فضا با اندازه‌گیری کمترین فاصله‌ای که باید یکی از آنها برای برقراری شرط دسترسی طی کند، انجام می‌شود. برای اینکه دو فضا را از هم قابل دستیابی بدانیم باید میان آن دو، سطح مشترکی حداقل به اندازه طول یک «در» وجود داشته باشد.
در تعریف فضای دسترسی به تشکیل شدن آن از تعدادی مستطیل پوشاننده اشاره کردیم. جریمه‌ی ایجاد دسترسی برای هر فضا از طریق فضای اصلی را با استفاده از روشی که برای دو فضا مطرح کردیم، محاسبه می‌کنیم. در این حالت کمترین فاصله‌ی لازم برای برقراری شرط دسترسی را میان فضا و هر کدام از این مستطیلها محاسبه کرده و کمترین آنها را به عنوان جریمه دسترسی اعلام می‌کنیم.

\begin{figure}[h] \centerline{\includegraphics{AccessCondition}} \caption{\label{fAccessCondition}
شرایط وجود دسترسی میان دو اتاق
 } \end{figure}

\subsubsection{نور}
شاید بتوان گفت یکی از مهمترین ویژگی‌های یک ساختمان نحوه استفاده از نور طبیعی در آن است. اضلاع مختلف ساختمان با توجه به مکان جغرافیایی و جهت قرارگیری آن، بهره‌ها متفاوتی از نور دارند. همچنین عوامل ساخته‌ی بشر می‌توانند مانع از رسیدن نور به بخشهایی از ساختمان شوند. عاملهای طبیعی و مصنوعی موثر روی نور ساختمان جزء محیط محسوب می‌شوند و کاربر نرم‌افزار باید به‌گونه‌ای نور محیط را برای آن مشخص کند. رویه‌ی کنونی به این شکل است که کاربر می‌تواند برای هر ضلع ساختمان، میزان نور را از بین سه گزینه‌ی نور مستقیم، نور آسمان (ضعیف) و بدون نور تعیین کند.
از طرف دیگر هر کدام از اتاقها با توجه به استفاده‌ای که برای آنها در نظر گرفته شده، به میزان مشخصی نیاز به نور دارند. برای نمونه هال و اتاقهای خواب به نور بیشتری نیاز دارند و در مقابل سرویسها و حمام نیازی به نور ندارند. کاربر باید نیاز اتاقها به نور را نیز در قالب همان سه گزینه مشخص کند. تنها فرضی که در نرم‌افزار انجام شده، نیاز فضای اصلی دسترسی (در خانه مسکون هال) به نور مستقیم است.
قرارگیری یکی از اتاقهای نیازمند نور در کنار یکی از اضلاع بهره‌مند از نور، موجب کسب امتیاز در این معیار می‌شود و میزان این امتیاز با مقدار نیاز اتاق، بهره‌مندی ضلع و سطح تماس میان آن دو رابطه مستقیم دارد. به این ترتیب تلاش بر آن است که هر اتاق نیازمند، بیشترین سطح ممکن نورگیری را داشته باشد و اتاقی که نیاز بیشتری دارد، به سمت ضلعی بهره‌مندتر تمایل پیدا می‌کند. همچنین اگر معیارهای دیگر موجود در نقشه، اقتضای محقق نشدن حداکثر نورگیری را داشته باشند، باز هم امکان نورگیری کمتر برای اتاقها با استفاده از مساحت تماس کم و یا ضلع کم نور وجود دارد.

\begin{figure}[h] \centerline{\includegraphics{LightScore}} \caption{\label{fLightScore}
نحوه محاسبه امتیاز برای معیار نور طبیعی
 } \end{figure}

\section{پیاده‌سازی}
نرم‌افزاری که در این پروژه برای رسیدن به هدف تولید نقشه‌ی خانه، ایجاد شده از دو واحد کاملا مجزا تشکیل شده است. واحد مربوط به اجرای فرایند تکامل و واسط گرافیکی نمایش خروجی‌ها که هر کدام در یک پردازه اجرا می‌شوند. مستقل بودن این دو بخش مزایایی دارد که از جمله آنها می‌توان به استفاده بی‌دریغ پردازه‌ی فرایند تکامل از منابع سیستم و امکان اختلال در کار واسط گرافیکی اشاره کرد. همچنین با توجه به امکان اجرای فرایند تکامل به صورت پیاپی و با پارامترهای مختلف، بهتر است بعد از هر اجرا، منابع استفاده شده در پردازه‌ی فرایند تکامل، به سیستم عامل باز گردند و در اجرای بعدی دوباره متناسب با نیازهای نو تخصیص یابند.

\subsection{فرایند تکامل}
در این پروژه برای اجرای فرایند تکامل از چارچوب ParadisEO\LTRfootnote{Parallel and Distributed Evolving Objects} استفاده شده است. جدا بودن بخش تعریف مساله و نحوه‌ی پاسخ‌گویی به آن در این چارچوب امکان اجرای چند نوع فرایند تکامل را فراهم آورده که همه‌ی آنها به شکل واحدی ورودی می‌گیرند و خروجی می‌دهند.
چارچوب متن‌باز ParadisEO به صورت شئ‌گرا و برای اجرای فرایندهای فراابتکاری\LTRfootnote{Metaheuristics} به صورت توزیع‌شده و موازی طراحی شده است. این چارچوب الگوریتم‌های تکاملی و جستجوی موضعی را با استفاده از مدلهای مختلف توزیع و موازی‌سازی فرایندها عرضه کرده و امکان ترکیب این الگوریتم‌ها را نیز فراهم می‌کند. 
این چارچوب با استفاده از کتابخانه‌های MPI و PThreads قابلیت اجرا روی ماشین‌هایی با حافظه‌ی توزیع‌شده و یا ماشین‌هایی با حافظه‌ی مشترک و پردازنده‌های توزیع‌شده را دارد و با قرارگیری میان کاربر و این کتابخانه‌ها، پیچیدگی کار با آنها را از کاربر پنهان می‌کند \cite{cahon_paradiseo}. همچنین در نگارشهای آزمایشی این چارچوب، قابلیت استفاده از GPU هم به ویژگی‌ها آن اضافه شده که می‌تواند عملکرد اجرای فرایند را بسیار بهتر کند.
 
\subsection{واسط گرافیکی}
خروجی فرایند تکامل رشته‌ای از اعداد است که آنها را با عنوان ژنوم می‌شناسیم. واسط گرافیکی طراحی شده برای این پروژه وظیفه‌ی نمایش این پاسخها را به صورت یک نقشه‌ی ساختمان بر عهده دارد. پردازه‌ی مربوط به فرایند تکامل طوری تنظیم شده که جمعیت پاسخها را نیز در سیر نسلها ذخیره کند. نرم‌افزار نمایشگر با قابلیت نمایش متوالی این نسلها، رویه‌ی رسیدن به پاسخ را از مراحل آغازین نشان می‌دهد. این نرم‌افزار با زبان C++ در چارچوب Qt نوشته شده است و با توجه به اجازه‌نامه‌ی این چارچوب، قابل انتشار به صورت رایگان است.

\begin{figure}[h] \centerline{\includegraphics{PopulationView}} \caption{\label{fPopulationView}
نمایش جمعیت حاصل فرایند تکامل
 } \end{figure}
 
 از دیگر قابلیتهای این نرم‌افزار محاسبه‌ی مقادیر معیارهای مختلف برای هر کدام از جوابها است. این ویژگی موجب تسهیل فرایند تعریف معیارها و بررسی دقیق تاثیر آنها بر هدایت فرایند تکامل می‌شود. در این راستا نرم‌افزار به کاربر اجازه می‌دهد با تغییر نقشه، نحوه تغییر مقادیر معیارها را مشاهده کند.
 
 \begin{figure}[h] \centerline{\includegraphics{EvaluationView}} \caption{\label{fEvaluationView}
نمایش معیارهای مختلف ارزیابی
 } \end{figure}

\section{نتایج روشهای مختلف}
در مدت انجام این پروژه روشهای زیر برای رسیدن به مجموعه جواب خوب و متنوع آزمایش شدند که در ادامه نتایج هر روش را بررسی می‌کنیم.

\subsection{الگوریتم ژنتیک}
اجرای الگوریتم ژنتیک با عملگرهای تعریف‌شده نتایج چندان جالبی به همراه ندارد. در این حالت اجرای الگوریتم نمی‌تواند تابع ارزیاب پیچیده (شامل همه‌ی موارد گفته شده) را ارضا کند و ادامه‌ی فرایند تکامل منجر به تولید پاسخ نمی‌شود. نتایج اجرا با نسخه‌ی ساده شده‌ی تابع ارزیاب (شامل مساحت و تداخل) منجر به تولید خروجی‌های نسبتا قابل قبولی می‌شود که البته چندان متنوع نیستند.

\subsection{استراتژی تکاملی}
اجرای این روش بدون استفاده از عملگرهای تعریف شده مخصوص مساله موجب تولید جواب بسیار قابل قبول شد. این نتیجه ممکن است کمی عجیب به نظر برسد و ضرورت تعریف عملگرهای مناسب را زیر سوال ببرد. نتایج و بررسی‌های بعدی نشان داد که اجرای این روش برای رسیدن به پاسخ، عملا منجر به اجرای یک جستجوی موضعی می‌شود و مستقل از تعداد جمعیت آغاز کننده فرایند تکامل، این فرایند به یک پاسخ بهینه‌ی موضعی همگرا می‌شود. این نکته‌ی بسیار مهم باعث شد که گزینه‌ی جستجوی موضعی را مورد بررسی قرار دهیم.

\subsection{روشهای چند هدفه}
اگرچه انتظار از اجرای این روشها رسیدن به تنوع بالا در جواب است، اما در این محله نیز خروجی‌ها تشابه زیادی به اجرای الگوریتم ژنتیک ساده دارند. البته با استفاده از تابع ارزیاب ساده تنوع جوابها در این روش تا حدی بهتر است.
نکته‌ی بسیار مهم در این روش و روش الگوریتم ژنتیک معمولی آن است که با افزایش تعداد فرزندان تولید شده و همچنین بالا بردن نقش عملگر جهش می‌توان به خروجی‌های بهتر و البته تقریبا همگرا دست یافت. ناگفته پیداست که این عوامل فرایند تکامل را به جستجوی محلی تبدیل می‌کنند.

\subsection{روشهای ترکیبی}


\section{نتیجه‌گیری}

\section{کارهای آینده}

\bibliographystyle{plain}
\bibliography{had}

\end{document}
